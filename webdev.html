<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="890"/>
<h1>Tutorial</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>15/06/2018 7:56 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>15/06/2018 8:37 PM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><b>Question 5: Servlets</b></div><div>Can put in configuration file for Tomcat, to locate web files to be deployed, or folders.</div><div>WAR (web application archives), can also be used to deploy.</div><div>Defining URLs, done in web.xml or through annotations.</div><div><b><br/></b></div><div><b>Question 7: JavaScript</b></div><div>message = message || { ... }</div><div>if message is undefined, then { ... }</div><div><br/></div><div>Difference between == &amp; ===?, === is not used for equality.</div><div><b><br/></b></div><div><b>Question 4: Security</b></div><div><b><br/></b></div></span>
</div>
<hr>
<a name="990"/>
<h1>Exam Practice (HTTP)</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>19/06/2018 7:44 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>19/06/2018 10:58 PM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><b>Question 1: HTTP</b></div><div><img src="webdev_files/Image.png" type="image/png" data-filename="Image.png" style="font-weight: bold;"/></div><div><b>a) What is the difference between persistent and non-persistent HTTP connection? Is the HTTP connection shown in Listing 1, persistent or non-persistent in nature?</b><br/></div><div><br/></div><div>Non-persistent HTTP means that a single object is sent per TCP connection established with the client. With persistent HTTP, multiple objects can be sent through a single connection (the server keeps the connection alive).</div><div>In the HTTP request, Connection: keep-alive, is specified and therefore, the connection is persistent.</div><div><br/></div><div><b>b) Suppose the page requested by the client has links to 5 images. How many round trips will it take for the browser to request and receive all the images using</b></div><div><b>i) persistent?</b></div><div>It will take 1RTT to establish a TCP connection with the client, followed by 1RTT per object requested and sent back to the client. That's a total of 6RTT.</div><div><b>ii) non-persistent?</b></div><div>The connection is opened five times, and five objects are sent. That's 5RTT for establishing connections, and an additional 5RTT for sending the objects. That's a total of 10RTT. 5(2RTT)...2RTT per round trip.</div><div><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">NOTE: RTT stands for Round-trip Time</b></div><div><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></b></div><div><img src="webdev_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-weight: bold; background-color: rgb(255, 250, 165);" width="496"/></div><div><span><b>c) The cache control header sent by the server is set to private. How does the browser handle the caching in this case?</b></span></div><div><span>The cache control being set to private, indicates to the browser that the cache is intended for a single user, and must not be cached by a shared cache such as a proxy server.</span></div><div><span><br/></span></div><div><b>d) Explain how cookies are used to introduce state in web services over a stateless HTTP protocol?</b></div><div>When a client requests a page ideally using a GET request, the server sends the client some session ID, in the form of a cookie. The client's browser then takes the Set-Cookie property value, and stores it as a cookie in the browser. Next time the client requests the host's website, the client's browser will include the cookie in the request header (dependent on the PATH specified in Set-Cookie).</div><div><br/></div><div><b>e) A week (May 9th, 2017), the client revisits the same web server with the following HTTP request. Which cookies (if any) will the client send to the server?</b></div><div><b>GET /massey/app_templates/js/jquery/colorbox/colorbox.css HTTP/1.1</b></div><div>The client will send the 'JSESSIONID' cookie. The other two have expired.</div><div><br/></div><div><b>f) Describe a feature of HTTP2, which improves its performance compared to HTTP1?</b></div><div>HTTP2 introduces header compression, which means only the header information that is required, is sent. It also introduces multiplexing which allows byte-streams</div><div><br/></div><div><b>g) Statelessness is an architectural constraint advocated by the Representation State Transfer (REST) design. What is an advantage and disadvantage of having stateless client-server interaction?</b></div><div>Not maintaining state makes the server design less complicated, without having to introduce data store for maintaining client information (e.g in memory).</div><div><br/></div></span>
</div>
<hr>
<a name="866"/>
<h1>HTTP/1.*</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>15/06/2018 6:27 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>20/06/2018 1:11 AM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div><span style="font-weight: bold; font-size: 12pt;">Uniform Resource Identifier</span></div><div><hr/></div><div>How resources/objects are uniquely identified,</div><div><span style="color: rgb(121, 121, 121); font-family: &quot;Segoe UI Historic&quot;; font-size: 11pt;">scheme://host[:port]/path/.../[;url-params][?query-string][#anchor]</span></div><div><br/></div><div><br/></div><div><span style="font-weight: bold; font-size: 12pt;">Connections</span></div><div><hr/></div><div>HTTP is <span style="font-style: italic; text-decoration: underline;">stateless</span>, meaning it stores no information about past client requests.</div><div><span style="font-style: italic;">Non-persistent</span> means at most one object is sent over a TCP connection.</div><div><span style="font-style: italic;">Persistent</span> means the opposite: multiple.</div><div><br/></div><div>TRANSACTION MODELS:Â <a href="http://blog.catchpoint.com/2010/09/17/anatomyhttp/">http://blog.catchpoint.com/2010/09/17/anatomyhttp/</a></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Non-persistent HTTP</span></div><div><img src="webdev_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div>Time for a small packet to travel from a client to the server and back is measured in <span style="font-style: italic;">RTT</span>. A pair: request &amp; response is considered 1 RTT. For a single object using non-persistent HTTP, 2RTT, since there are two responses.</div><div><br/></div><div>For persistent, 1RTT per object sent, and one to setup the TCP connection.</div><div><br/></div><div><span style="font-weight: bold; font-size: 12pt;">Messages</span></div><div><hr/></div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Request messages</span></div><div><img src="webdev_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-weight: bold; text-decoration: underline;" width="275"/></div><div>For POST, form input is embedded in the entity body and sent to the server.</div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Method types</span></div><div>For HTTP/1.1, <span style="font-style: italic;">PUT &amp; DELETE</span> are supported. That is, upload a file in the entity body to the path specified in the URL, OR delete. In addition, also supports HTTP/1.0 methods: GET, POST, <span style="font-style: italic;">HEAD</span> (requests server to leave out entity body in response).</div><div><br/></div><div>Content-Type: type &quot;/&quot; subtype [&quot;;&quot; parameter-string] =&gt; Content-Type: text/plain; charset='us-ascii'</div><div>Content-Encoding: [gzip | compress | deflate]</div><div><br/></div><div>There is also support for <span style="font-style: italic;">Multipart</span> messages, main purpose: multiple bodies in one request, e.g multiple files.</div><div><br/></div><div>POST limitations: often 4GB on 32-bit machine, otherwise around 16GB on 64.</div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Response Messages</span></div><div>HTTP/1.1 200 OK\r\n</div><div>...\r\n</div><div>\r\n</div><div>{Entity Body}</div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Common statuses</span></div><ul><li><div>100 CONTINUE,</div></li><li><div>200 OK,</div></li><li><div>301 MOVED PERMANENTLY,</div></li><li><div>400 BAD REQUEST,</div></li><li><div>404 NOT FOUND,</div></li><li><div>505 HTTP Version Not Supported.</div></li></ul><div><br/></div><div><br/></div><div><span style="font-weight: bold; font-size: 12pt;">Keeping State</span></div><div><hr/></div><div>e.g, cookies are used to maintain client state. Often, these are sessions.</div><ol><li><div>Cookie is sent from the server, and is included in the header.</div><div>'Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;</div><div>[; Expires=&lt;date&gt;]</div><div>[; Max-Age=&lt;non-zero-digit&gt;]</div><div>[; Domain=&lt;domain-value&gt;]</div><div>[; Path=&lt;path-value&gt; (relative)]</div><div>[; Secure (HTTPS only)]</div></li><li><div>Cookie is stored locally on the client's browser, and the server has data relating to this cookie. It uses it like a 'key', to access data.</div></li><li><div>Client sends the cookie for every request to the server. 'cookie: X'</div></li></ol><div><br/></div><div><br/></div><div><span style="font-weight: bold; font-size: 12pt;">Caches</span></div><div><hr/></div><div><img src="webdev_files/Image [4].png" type="image/png" data-filename="Image.png" width="256"/></div><div>A proxy acts as a middle man, stores cache. If the cache is outdated, the origin server updates it. If the client requests cached information which is stored in the proxy server, the proxy handles the request. Otherwise, the origin server fulfills the request. 1. reduces response time, 2. reduces traffic.</div><div><br/></div><div><span style="font-weight: bold; text-decoration: underline;">Cache-Control</span></div><div>public: indicates the response may be cached by any cache.</div><div>private: the cache is intended only for a single user, and cannot be stored on a shared cache.</div><div>no-cache: forces origin server to check validation before releasing cached copy.</div><div>no-store</div><div><br/></div><div>Cached date is included in the header, to compare with server version. If old, server updates.</div><div>If-modified-since: &lt;date&gt;, if it isn't old the server returns 304 - Not Modified.</div><div>Pragma: no-cache is backwards compatible with HTTP/1.0</div><div><br/></div><div><br/></div><div><span style="font-weight: bold; font-size: 12pt;">CGI (Common Gateway Interface)</span></div><div><hr/></div><div>Controls the flow of requests.</div><div><img src="webdev_files/Image [5].png" type="image/png" data-filename="Image.png" width="296"/></div><div><br/></div></div><div><br/></div></span>
</div>
<hr>
<a name="876"/>
<h1>Sockets</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>15/06/2018 7:28 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>19/06/2018 3:10 PM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><b><font style="font-size: 12pt;">UDP</font></b></div><div><hr/></div><div>Unreliable datagram. Datagram = group of bytes.</div><div>Sender explicitly attaches IP destination address and port # to each packet.</div><div>rcvr extracts sender IP address &amp; port# from received packet.</div><div>Data may be lost or received out-of-order.</div><div>Typically ideal for fast data streams that require optimal speeds, while order and reliability of data isn't absolute.</div><div><b><br/></b></div><div><b>Python implementation</b></div><div><br/></div><div><img src="webdev_files/Image [6].png" type="image/png" data-filename="Image.png" width="296"/></div><div><br/></div><div><br/></div><div><img src="webdev_files/Image [7].png" type="image/png" data-filename="Image.png" width="288"/></div><div><br/></div><div><b><br/></b></div><div><b><font style="font-size: 12pt;">TCP</font></b></div><div><hr/></div><div>TCP provides reliable, in-order byte-stream transfer (&quot;pipe&quot;) between client &amp; server.</div><div><br/></div><div><img src="webdev_files/Image [8].png" type="image/png" data-filename="Image.png" width="323"/></div><div><br/></div><div><img src="webdev_files/Image [9].png" type="image/png" data-filename="Image.png" width="330"/></div><div><br/></div></span>
</div>
<hr>
<a name="878"/>
<h1>RESTful API</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>15/06/2018 7:30 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>15/06/2018 7:40 PM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><span style="font-weight: bold;">RE</span>presentation <span style="font-weight: bold;">S</span>tate <span style="font-weight: bold;">T</span>ransfer</div><div>Application programming interface for developing web services.</div><div>Allows computers and servers to communicate with each other.</div><div><br/></div><div>Resources are identified by URIs, and are labelled as <b>nouns</b>.</div><div><br/></div><div><br/></div><div><b>Architectural Constraints</b></div><div><hr/></div><div><b>Client-server</b>:Â Separate UI from data storage.</div><div><b>Stateless</b>: improves visibility, reliability and scalability, may degrade network performance.Â </div><div><b>Cache</b>: improves network efficiency. Clients have cached data.</div><div><b>Uniform interface;</b></div><div><img src="webdev_files/Image [10].png" type="image/png" data-filename="Image.png" width="442"/></div><div>There are also <b>layered systems</b>, which shields components, and introduces <i>load balancing</i>.</div><div><img src="webdev_files/Image [11].png" type="image/png" data-filename="Image.png" width="428"/></div><div><b>Code-on-Demand</b> refers to locally stored code, on client machines too: for quick access. Optional, and games use it.</div></span>
</div>
<hr>
<a name="884"/>
<h1>HTTP/2.0</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>15/06/2018 7:41 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>19/06/2018 11:03 PM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div><span style="font-weight: bold;">HTTP/1.*</span> has the following shortcomings</div><ul><li><div>Head of line blocking.</div></li><li><div>Overheads in header transmission</div></li><li><div>Lack of multiplexing, workarounds include parallel connections.</div></li></ul><div><br/></div><div><span style="font-weight: bold;">HTTP/2.0</span> overcomes these, and enables multiplexing.</div><div>The version adds a new DATA frame, separating the header from the data. It enables streams.</div><div><span style="font-weight: bold;">Streams</span> is a bidirectional flow of bytes within an established connection, and can contain multiple messages.</div><div>A message contains a sequence of frames.</div><div>Each <span style="font-weight: bold;">frame</span> contains a frame header.</div><div><br/></div><div><img src="webdev_files/Image [12].png" type="image/png" data-filename="Image.png" width="512"/></div><div><br/></div><div>The above image of an example of <span style="font-weight: bold;">multiplexing</span> requests &amp; responses. <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Multiplexing allows a browser to fire off multiple requests at once on the same TCP connection and receive the requests back in any order. On a HTTP/1.1 connection, the CSS documents, or resources e.g JavaScript the browser recognizes it needs in the received HTML document, it can only send one request at a time. While HTTP/2.0 allows a burst of requests. HTTP/1.1 is basically synchronous, while 2.0 is asynchronous (e.g context-switching).</span><span>Â So rather than the browser sending a request, waiting, sending another... rather than waste time waiting, it can send multiple requests.</span></div><div><br/></div><div>HTTP/2.0 also has <span style="font-weight: bold;">header compression</span>. Header information only is required, if it changes (in the stream that is).</div><div><img src="webdev_files/Image [13].png" type="image/png" data-filename="Image.png" width="287"/></div><div>Also, <span style="font-weight: bold;">flow control</span>: prevents overwhelming. How many bytes ready to receive?</div><div><br/></div></div><div><br/></div></span>
</div>
<hr>
<a name="970"/>
<h1>Security</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>19/06/2018 3:12 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>19/06/2018 7:14 PM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div><b><font style="font-size: 12pt;">Fundamentals</font></b></div><div><hr/></div><ul><li><div><b>Confidentiality</b>: only sender &amp; intended receiver should understand message contents.</div></li><li><div><b>Authentication</b>: sender &amp; receiver want to confirm identity of each other.</div></li><li><div><b>Message integrity</b>: sender &amp; receiver want to ensure messages are not altered without detection.</div></li><li><div><b>Access &amp; availability</b>: services must be accessible and available to users.</div></li></ul><div><br/></div><div><br/></div><div><b><font style="font-size: 12pt;">Injections</font></b></div><div><hr/></div><div>SQL Injection</div><div><b>Cross Site Scripting (XSS)</b></div><div><hr/></div><ul><li><div>Can be exploited to bypass security mechanisms such as same-origin policy.</div></li><li><div>Attackers inject client-side scripts into web pages viewed by other users.</div></li></ul><div>Same-origin policy refers to assurance that the data sent via XHR goes to the same host the client script is from.</div><div><br/></div><div>&amp;lt; stands for &lt; and &amp;gt; stands for &gt;, &amp;lt;script&amp;gt; ... will not be executed. Only &lt; ... &gt; will.</div><div><br/></div><div><b>Reflected XSS:</b> the injection is only available to particular clients e.g one that has clicked on a link.</div><div><b>Persistent XSS:</b> the script is injected into some database on the server, and is live to all clients.</div><div><br/></div><div>Escaping: blacklist &lt;script&gt;, &lt;link&gt;, &lt;frame&gt;. SQL: #, --</div><div><br/></div><div><br/></div><div><b><font style="font-size: 12pt;">Cryptography</font></b></div><div><hr/></div><div><b>Symmetric keys:</b> Both parties use the same keys. <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">The key can be used to encrypt and decrypt an encrypted phase.</span> Example includes substituting one thing for another.</div><div>DES: Data Encryption Standard. Not secure (can be brute-forced), replaced with Advanced Encryption Standard.</div><div><b><br/></b></div><div><b>Asymmetric keys:</b> makes use of public &amp; private keys. Public key is known to all and is used to encrypt. Private key: decryption (only known by receiver).</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Once it is encrypted, it can only be decrypted by using the private key. It is one way.</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Given public key, <b>K<font style="font-size: 8pt;">+</font></b>, it should be impossible to compute private key <b>K<font style="font-size: 8pt;">-</font></b></span></div><div><br/></div><div><b>RSA</b> := Rivest, Shamir, Adelson</div><div><img src="webdev_files/Image [14].png" type="image/png" data-filename="Image.png" width="281"/></div><div>It is secure since factoring a big number is hard... that is with the two large unknown prime numbers.</div><div><br/></div><div><b>RSA for session keys</b></div><div>Use public key cryto to establish a secure connection, then establish a second key for a symmetric <i>session</i> key for encrypting data.</div><div><br/></div><div><br/></div><div><b><font style="font-size: 12pt;">Authentication</font></b></div><div><hr/></div><div>Attacks include spoofing addresses to pretend to be someone else. Playback attack includes playing back a packet containing a password to spoof the address.</div><div><br/></div><div>ap4.0 uses a shared symmetric key, and nonce (some random number that is encrypted; tested to form a handshake).</div><div>ap5.0 uses nonce, but with public key cryptography.</div><div><br/></div><div><img src="webdev_files/Image [15].png" type="image/png" data-filename="Image.png" width="480"/></div><div><b>Man in the middle</b> attacks involves being in the middle to obtain the keys, then reading all the messages.</div><div><br/></div><div><b>Digital signatures</b></div><div><hr/></div><div>Encrypting with private key, then receiver uses public key to verify.</div><div><br/></div><div><b>Hashing</b></div><div>MD5 computes 128-bit message digest in 4-step process.</div><div><br/></div><div><b>Public key certification</b></div><div><hr/></div><div><img src="webdev_files/Image [16].png" type="image/png" data-filename="Image.png" width="382"/></div><div><img src="webdev_files/Image [17].png" type="image/png" data-filename="Image.png" width="329"/></div><div><br/></div></div></span>
</div>
<hr>
<a name="980"/>
<h1>Security (TLS/SSL)</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>19/06/2018 7:16 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>19/06/2018 7:35 PM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div><b><font style="font-size: 12pt;">SSL/TLS: Secure Sockets Layer/Transport Layer Security</font></b></div><div><hr/></div><div>Provides:</div><ul><li><div>Confidentiality.</div></li><li><div>Integrity.</div></li><li><div>Authentication.</div></li></ul><div><br/></div><div>Available to all TCP applications. Secure socket interface.</div><div><br/></div><div><img src="webdev_files/Image [18].png" type="image/png" data-filename="Image.png" width="525"/></div><div><img src="webdev_files/Image [19].png" type="image/png" data-filename="Image.png" width="407"/></div><div><b>After Phase I the client &amp; server know (ClientHello/ServerHello):</b></div><ol><li><div>The version of SSL</div></li><li><div>The algorithms for key exchange, message authentication &amp; encryption.</div></li><li><div>The compression method.</div></li><li><div>The two random numbers for key generation.</div></li></ol><div><br/></div><div><b>After Phase II (ServerHelloDone),</b></div><ol><li><div>The server is authenticated to the client.</div></li><li><div>The client knows the public key of the server.</div></li></ol><div><br/></div><div><img src="webdev_files/Image [20].png" type="image/png" data-filename="Image.png"/></div><div><b>After Phase III,</b></div><ol><li><div>The client is authenticated for the server.</div></li><li><div>Both the client &amp; server know the pre-master secret.</div></li><li><div>The server knows the client's public key and hash code to prove certificate.</div></li></ol><div><br/></div><div><b>Final phase of the handshake is testing it,</b></div><div><img src="webdev_files/Image [21].png" type="image/png" data-filename="Image.png" width="428"/></div><div><br/></div><div>The ChangeCipherSpec protocol is used to exchange data.</div></div></span>
</div>
<hr>
<a name="555"/>
<h1>Intro: Servlets</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>7/05/2018 12:59 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>20/06/2018 12:39 AM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div><span style="font-weight: bold;">Servlets in Java (CGI-type implementation)</span></div><div><br/></div><div>The Servlet implementation in Java contains the following <span style="font-weight: bold;">packages</span>,</div><ol><li><div><span style="font-weight: bold;">javax.servlet</span> - core (includes request &amp; response)</div></li><li><div><span style="font-weight: bold;">javax.servlet.http</span> - additional methods add HTTP support</div></li><li><div><span style="font-weight: bold;">javax.servlet.jsp</span> - Java Server Pages</div></li><li><div><span style="font-weight: bold;">javax.servlet.jsp.tagext</span> - Tag libraries</div></li><li><div><span style="font-weight: bold;">javax.servlet.http.annotation</span> - Annotation based configuration</div></li></ol><div><br/></div><div>Servlets must be enclosed by a synchronized block: restricting it to one client at one time. Usage of thread pools may exist for servlets, to handle requests.</div><div><br/></div><div><span style="font-weight: bold;">Basic Structure</span></div><ol><li><div>Content-Type &amp; other header information.</div></li><li><div>Output stream.</div></li><li><div>Use output stream to write response.</div></li><li><div>Close output stream.</div></li></ol><div><br/></div><div><span style="font-weight: bold;">Writers VS Output Streams</span></div><div>Writers are character streams whereas output streams are byte streams.</div><div>Character stream := two bytes per character. Byte stream + character encoding.</div><div><br/></div><div><span style="font-style: italic;">Character stream</span> is for producing text (html, xml, json).</div><div><span style="font-style: italic;">Output streams</span> are used to produce binary data (images, audio).</div><div><br/></div><div><b>Separation of content &amp; presentation</b> refers to separating data from presentation. Someone may modify the data, and the web page loads the data.</div><div><br/></div><div><b>Caching</b></div><div>Rather than loading a file from I/O per client request, caching can be used to keep the content stored in memory, until the file is modified. I/O is slow.</div><div><br/></div><div><span style="font-weight: bold;">Web Application Archives</span></div><div>Compressed web applications i.e zip files. File extension is WAR.</div><div><br/></div><div><span style="font-weight: bold;">Web Application Structure</span></div><div>There will be a <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">WEB-INF</span> folder which contains classes (<span style="font-style: italic;">compiled</span>), libraries and the configuration file (web.xml). <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">This folder isn't accessible by a client.</span></div><div><img src="webdev_files/Image [22].png" type="image/png" data-filename="Image.png" style="background-color: rgb(255, 250, 165);"/></div><div>web.xml can be <b>neglected</b> if annotations are used instead.</div><div><img src="webdev_files/Image [23].png" type="image/png" data-filename="Image.png" width="473"/></div><div><br/></div><div><span style="font-weight: bold;">Deployment</span></div><div><img src="webdev_files/Image [24].png" type="image/png" data-filename="Image.png" style="font-weight: bold;" width="357"/></div><div>Cold deployment: server must be restarted to deploy a new web application.</div><div>Hot deployment: may deploy web applications while the server is running. For Tomcat, server.xml: autoDeploy.</div><div><br/></div><div><b>WebApp Configuration</b></div><div><img src="webdev_files/Image [25].png" type="image/png" data-filename="Image.png" style="font-weight: bold;" width="336"/></div><div><br/></div><div><span style="font-weight: bold;">Annotation Based Configuration</span></div><div>Allows tags such as @GET, @POST, @Servlet, @ServletFilter, @WebServletContextListener. Simplifies the web.xml file. Settings in web.xml override annotations.</div><div><br/></div></div><div><span style="font-weight: bold;">Servlet Life-cycle</span></div><div>Servlets are stateless, with one servlet per class that handles all requests. Stateless: doesn't need to clog memory maintaining state.</div><div><br/></div><div>Can override destroy() &amp; init() methods. For releasing resources, or customizing creation of servlet.</div><div><br/></div></span>
</div>
<hr>
<a name="564"/>
<h1>Servlets</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>8/05/2018 2:08 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>20/06/2018 1:08 AM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><span style="font-weight: bold;">Retrieving Header Information</span></div><div>Header information can be retrieved through using the <span style="font-style: italic;">request.getHeaderNames()</span> &amp; <span style="font-style: italic;">request.getHeader(headerName)</span> methods.</div><div><img src="webdev_files/Image [26].png" type="image/png" data-filename="Image.png"/></div><div>Useful for determining client's language and other information.</div><div><br/></div><div><span style="font-style: italic;">response.setStatus(int)</span> will set the status of the HTTP message. i.e <span style="font-style: italic;">SC_NOT_MODIFIED</span> after getting the <span style="font-style: italic;">If-Modified-Since</span> header information.</div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">Form Processing</span></div><div>The <span style="font-style: italic;">doGet()</span> &amp; <span style="font-style: italic;">doPost()</span> methods are invoked. For example, the following code snippet will invoke the <span style="font-style: italic;">doGet()</span> method, and it's possible to fetch the <span style="font-style: italic;">id</span> using <span style="font-style: italic;">getParameter(&quot;id&quot;);</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;form action=&quot;/myservlet&quot; method=get&gt;</div><div>Â Â Â Â &lt;input name = &quot;id&quot; /&gt;</div></div><div><span style="font-style: italic;">getParameterNames()</span> may be useful to iterate through all parameters.</div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">Dates</span></div><div><span style="font-style: italic;">java.text.DateFormat.parse(String)</span> provides the option for Locale. It's possible to get the date for a particular locale founded by the header information.</div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">Cookies</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>new Cookie(name, value);</div><div>cookie.setXxx //xxx: many methods</div><div>response.addCookie(cookie); //add cookie to response</div><div><br/></div><div>//Later:</div><div>request.getCookies(); //cookies sent from the client's browser, as array</div><div>//cookie.getName() to get cookie name when itering. cookie.getValue()</div></div><div>Illegal characters in cookies include [, ], (, ), =, ,, &quot;, /, ?, @, :, ;</div><div>Browsers accept maximum of 20 cookies per site, maximum size being 4KB. DDoS attacks impossible since these limitations exist.</div><div><br/></div><div><br/></div></span>
</div>
<hr>
<a name="577"/>
<h1>Servlets: Sessions</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>13/05/2018 9:35 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>20/06/2018 11:12 AM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div><span style="font-weight: bold;">Sessions</span></div><ol><li><div>The client is given a cookie containing the session id of a new session.</div></li><li><div>When the client makes a request, the cookie is used to find the session information on the server.</div></li><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">The server must handle session expiration/time outs.Â </span></div></li><li><div>URL rewriting encodes season ids within URLs. This is implemented by Servlets when cookies are not available.</div></li><li><div>Using Servlets, <span style="font-style: italic;">request.getSession(true);</span> where if specified as true, it'll create a new session if there isn't already an existing one. <span style="font-style: italic;">getId()</span> returns the session id. <span style="font-style: italic;">isNew()</span> returns true if a new session has been created and getCreationTime() returns the time in milliseconds, that it was created. Other methods include: <span style="font-style: italic;">getLastAccessedTime(), getMaxInactiveInterval(), invalidate()</span> (removes the session).</div></li><li><div><span style="font-weight: bold;">Session listeners</span>: fetching more information from database for example. Must notify database if session has closed.</div></li></ol><div><br/></div><div><b>Three possible approaches to managing session information:</b></div><ul><li><div>Cookies</div></li><li><div>URL rewriting (encodeURL())</div></li><li><div>Hidden form fields</div></li></ul><div><br/></div><div><b>Session API has --</b></div><ul><li><div>setAttribute()/getAttribute() to set session information stored by the server.</div></li><li><div>getId() returns sessionId</div></li><li><div>isNew() checks if session was just created.</div></li><li><div>getCreationTime() - time is in milliseconds</div></li><li><div>getLastAccessedTime() - milliseconds</div></li><li><div>getMaxInactiveInterval() - in seconds, after this time the session is invalidated. Negative indicates it will never be invalidated.</div></li><li><div>invalidate()</div></li></ul><div><br/></div><div><b>Listeners - use case</b></div><div>Can use sessions to: store x session search results, then keep iterating over results from the database. On session timeout, must notify db that connection is closed.</div><div><br/></div><div><span style="font-weight: bold;">Session Listeners</span></div><div>Enables customization in regards to the life-cycle of session objects. That is, hooks for initialization &amp; finalization. Can be used to notify database the connection has closed.</div><div>To add a session listener:</div><ul><li><div>must implement the HttpSessionListener interface</div></li><li><div>implement methods <span style="font-style: italic;">sessionCreated()</span> and <span style="font-style: italic;">sessionDestroyed()</span>. Overrides...</div></li><li><div>Declare listener in web.xml</div></li></ul><div>Â Â  Â Â Â Â Â  Â  Â <img src="webdev_files/Image [27].png" type="image/png" data-filename="Image.png" width="337"/></div><ul><li><div>There are also listeners for when session attributes change (HttpSessionAttributeListener).</div></li></ul><div><br/></div><div><br/></div><div><span style="font-weight: bold;">Sessions Example</span></div><div>Below is an example for a shopping cart.</div><div><img src="webdev_files/Image [28].png" type="image/png" data-filename="Image.png" style="font-weight: bold;" width="347"/></div><div><br/></div></div><div>Â </div></span>
</div>
<hr>
<a name="583"/>
<h1>Servlets: Databases/Modular</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>13/05/2018 9:36 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>20/06/2018 11:27 AM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div><span style="font-weight: bold;">Connecting to a database</span></div><div>Servlets can connect to relational databases using JDBC (Java DB Connectivity).</div><div><br/></div><div><span style="font-weight: bold;">Design &amp; Performance Issues</span></div><ul><li><div>Connections are not created directly by the Servlet, but instead using a factory (DataSource).</div></li><li><div>It's important to close connections. This is done in the finally clause.</div></li><li><div>Paradigm mismatch is where OO languages use reference by address for objects, while databases use primary &amp; foreign keys. ORM frameworks address this. <span style="font-style: italic;">Hibernate</span> is an example ORM framework.</div></li><li><div>Hibernate example...</div></li></ul><div><img src="webdev_files/Image [29].png" type="image/png" data-filename="Image.png" width="331"/></div><div>Â </div></div><div><b>Logging</b></div><div>ServletContext.log() is used to log details to the server log.</div><div><br/></div><div><b>ServletContext</b></div><div>Enables accessing resources, log facilities and obtaining request dispatchers. Represents the <i>environment</i>.</div><div><br/></div><div><b>Including &amp; Forwarding</b></div><div>Used to design modular web applications, where multiple servlets work together. Issues: output must be well formed, attribute to be shared. Content-type only set once.</div><div><img src="webdev_files/Image [30].png" type="image/png" data-filename="Image.png" width="475"/></div><div>Inclusion reduces repetition. It is more flexible than one servlet.</div><div><br/></div><div><b>OutputStream</b></div><div>Since it is a byte stream, it's used for images and media etc.</div><div><br/></div><div><br/></div></span>
</div>
<hr>
<a name="1006"/>
<h1>Servlets: Filters &amp; Testing</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>20/06/2018 11:31 AM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>20/06/2018 11:43 AM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><b><font style="font-size: 12pt;">Filters</font></b></div><div><hr/></div><div><br/></div><div>Filters are useful for transparent pre- and post processing of requests. Do not produce responses, however have access to both the request &amp; response. Common uses include logging requests, or compress the response.</div><div>Has two lifecycle methods: init() &amp; destroy(), where doFilter() applies the filter.</div><div><img src="webdev_files/Image [31].png" type="image/png" data-filename="Image.png" width="314"/></div><div><br/></div><div><br/></div><div><b><font style="font-size: 12pt;">Testing</font></b></div><div><hr/></div><div><b>Whitebox tests:</b> Mock objects. Basically makes the servlets invokable.</div><div><b>Blackbox tests:</b> testing using an HTTP client.</div></span>
</div>
<hr>
<a name="591"/>
<h1>Java Server Pages (JSP)</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>20/05/2018 10:07 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>20/06/2018 12:20 PM</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div>JSP files are HTML templates that are ready to be processed. Their dynamic content is then translated into a static page, which is then sent to the client. &lt;%= ... %&gt; tags are used to insert dynamic code snippets.</div><div><br/></div><div>Server pages are not served directly to the client that makes the request, but are first processed to replace the dynamic parts. Often achieved through compiling the page into scripts e.g PHP/ASP/JSP.</div><div><br/></div><div><b><font style="font-size: 12pt;">Life cycle</font></b></div><div><hr/></div><ol><li><div>Page Compiler: A servlet class is generated from the JSP page, where static lines of HTML is replaced by lines like out.println(&quot;&lt;body&gt;&quot;); and combined with java code found in the JSP page.</div></li><li><div>Java compiler: servlet class is compiled. Thus why Tomcat requires JDK rather than JRE. Stored in work/ folder.</div></li><li><div>Loading: compiled servlet loaded and instantiated by server.</div></li><li><div>Naming: server associates JSP URL with servlet class. URL points to the servlet using annotations i.e.</div></li></ol><div><br/></div><div><span style="font-weight: bold;"><font style="font-size: 12pt;">JSP embedded Java</font></span></div><div><hr/></div><div><img src="webdev_files/Image [32].png" type="image/png" data-filename="Image.png"/></div><div><img src="webdev_files/Image [33].png" type="image/png" data-filename="Image.png"/></div><div><img src="webdev_files/Image [34].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>Directives are to be interpreted by the JSP engine only.<img src="webdev_files/Image [35].png" type="image/png" data-filename="Image.png" width="415"/></div><div>Three directives: page, include and taglib. Page allows for output type, error handling and to import packages. JSP can generate other formats e.g JSON.</div><div><br/></div><div>Including static server pages (directive is executed when servlet is built at deploy time not request time);Â <img src="webdev_files/Image [36].png" type="image/png" data-filename="Image.png" width="300"/></div><div><br/></div><div><br/></div><div><b>&lt;%code%&gt;</b>Â (can be multi-line) is just normal code, <b>&lt;%=expression%&gt;</b> is code that is evaluated and appended to output. <b>&lt;%!code%&gt;</b> generally used to define constants.</div><div><img src="webdev_files/Image [37].png" type="image/png" data-filename="Image.png" width="338"/></div><div><img src="webdev_files/Image [38].png" type="image/png" data-filename="Image.png" width="466"/></div><div><br/></div><div>Pre-defined objects include,</div><div><i>request, response, session, out, application (servlet context).</i></div><div><i><br/></i></div><div><b><br/></b></div><div><b><font style="font-size: 12pt;">Error handling</font></b></div><div><hr/></div><div><img src="webdev_files/Image [39].png" type="image/png" data-filename="Image.png" style="font-weight: bold;"/></div><div><img src="webdev_files/Image [40].png" type="image/png" data-filename="Image.png" width="533"/></div><div><br/></div><div><br/></div><div><b><font style="font-size: 12pt;">Sessions &amp; Forms</font></b></div><div><hr/></div><div><img src="webdev_files/Image [41].png" type="image/png" data-filename="Image.png" width="447"/></div><div><img src="webdev_files/Image [42].png" type="image/png" data-filename="Image.png" width="476"/></div><div><br/></div><div><b><font style="font-size: 12pt;">Expression Language</font></b></div><div><hr/></div><div>${code}, evaluates. Has shortcuts e.g ${param.Name} =&gt; request.getParameter(&quot;Name&quot;);</div><div><b><br/></b></div><div><b>Tag libraries add support for custom tags</b></div><div><img src="webdev_files/Image [43].png" type="image/png" data-filename="Image.png" width="249"/></div><div><br/></div></div></span>
</div></body></html> 